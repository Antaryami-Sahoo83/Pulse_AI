{% extends "layout.html" %}

{% block content %}
<div class="container my-5">
      <div class="row">
            <div class="col-md-6 mx-auto">
                  {% if messages %}
                  <div class="alert alert-warning alert-dismissible fade show" role="alert">
                        {% for m in messages %}
                              <p class="{{ m.tags }} m-0">{{ m }}</p>
                        {% endfor %}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                  </div>
                  {% endif %}
            </div>
      </div>

      <div class="row my-5">
            <div class="col-md-6 mx-auto">
                  <h3 class="text-center mb-2">Change Password</h3>
                  <form action="{% url 'change_password' %}" method="post">
                  {% csrf_token %}
                  <div class="form-group">
                        {{ form.old_password.label_tag }}
                        {{ form.old_password }}
                  </div>
                  <div class="form-group">
                        {{ form.new_password1.label_tag }}
                        {{ form.new_password1 }}
                  </div>
                  <div class="form-group">
                        {{ form.new_password2.label_tag }}
                        {{ form.new_password2 }}
                  </div>
                  <button type="submit" class="btn btn-dark w-100 rounded-0 mt-2">Update Password</button>
                  </form>
            </div>
      </div>
</div>

<script>
      document.addEventListener('DOMContentLoaded', function() {
            var oldPasswordField = document.querySelector('[name="old_password"]');
            var newPassword1Field = document.querySelector('[name="new_password1"]');
            var newPassword2Field = document.querySelector('[name="new_password2"]');

            oldPasswordField.classList.add('form-control', 'rounded-0', 'mb-2');
            newPassword1Field.classList.add('form-control', 'rounded-0', 'mb-2');
            newPassword2Field.classList.add('form-control', 'rounded-0', 'mb-2');
      });
</script>

{% endblock %}
